<div class="max-w-3xl mx-auto p-4">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-2xl font-bold">My Todo List</h1>
    <div>
      <%= link_to "New Todo", new_todo_item_path, class: "bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2" %>
      <%= link_to "New Section", new_section_todo_item_path, class: "bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded" %>
    </div>
  </div>

  <% if @all_items.empty? %>
    <div class="text-center py-8 bg-gray-50 rounded-lg">
      <p class="text-gray-500">You don't have any todos yet. Create a new todo to get started!</p>
    </div>
  <% else %>
    <div data-controller="sortable" 
         data-sortable-url-value="<%= reorder_todo_items_path %>"
         class="space-y-2">
      <% @all_items.each do |item| %>
        <% if item.is_section? %>
          <div data-sortable-target="item" data-id="<%= item.id %>" class="section mb-4">
            <%= render 'sections/section', section: item %>
          </div>
        <% else %>
          <div data-sortable-target="item" data-id="<%= item.id %>" class="<%= 'ml-6' if item.section %>">
            <%= render 'todo_items/todo_item', todo_item: item %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>